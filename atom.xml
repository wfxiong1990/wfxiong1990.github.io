<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Weifeng's Blog]]></title>
  <subtitle><![CDATA[刷机熊也很忙]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://wfxiong1990.github.io/"/>
  <updated>2014-10-24T16:41:29.332Z</updated>
  <id>http://wfxiong1990.github.io/</id>
  
  <author>
    <name><![CDATA[Weifeng Xiong]]></name>
    <email><![CDATA[wfxiong1990@gmail.com]]></email>
  </author>
  
  <generator uri="http://zespia.tw/hexo/">Hexo</generator>
  
  <entry>
    <title><![CDATA[用python实现图灵机器人的接口]]></title>
    <link href="http://wfxiong1990.github.io/2014/10/25/using-python-to-call-tuling123-api/"/>
    <id>http://wfxiong1990.github.io/2014/10/25/using-python-to-call-tuling123-api/</id>
    <published>2014-10-24T16:13:03.000Z</published>
    <updated>2014-10-24T16:39:44.000Z</updated>
    <content type="html"><![CDATA[<h2 id="码这坨代码目的">码这坨代码目的</h2>
<p>在知乎上看到，<a href="http://www.zhihu.com/question/20492916" target="_blank" rel="external">微信公众平台的聊天机器人是怎么搭建？</a>的主题,对图灵机器人感兴趣起来，官方有php和java的实现，那么，python的简单实现，就我了。</p>
<h2 id="开始码代码啦">开始码代码啦</h2>
<p>首先，需要import一下urllib2这个组件，用于以GET的方式请求。<br>发请求的部分：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">req = urllib2.Request(url)</div></pre></td></tr></table></figure>

<p>收到请求</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">res_data = urllib2.urlopen(req)</div><div class="line">res = res_data.read()</div></pre></td></tr></table></figure>

<p>收到的是以字符串的形式，当然也可以转换成字典或者json，个人比较喜好json（一种类xml的储存和交换文本信息的语法），那么再import一下json的库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dic=eval(res)  <span class="comment">#转换为字典</span></div><div class="line">myJson2=json.loads(res)  <span class="comment">#转换为json</span></div></pre></td></tr></table></figure>

<p>好了，大功告成，但是问题来了，如何在命令行里面一直保持程序能接受到用户输入的状态，经stackoverflow的指点，用while True 然后如果用户直接回车那么break出来。最后程序如下，太短了，自己都看不下去了。。。<br>ps: 根据图灵机器人给出的借口文档，如果请求的链接里面带userid的话会联系上下文返回，所以建议加上。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding=UTF-8</span></div><div class="line"><span class="keyword">import</span> json</div><div class="line"><span class="keyword">import</span> urllib2</div><div class="line"></div><div class="line">url = <span class="string">"http://www.tuling123.com/openapi/api?key=09e28a9f654a341ad11601cd0e1bf44_&userid＝hackerxiong&info="</span>  <span class="comment">#key的最后一位省略了，想知道的请留言找我推荐注册哈；输入参数info就是要请求的内容</span></div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:  <span class="comment">##一直保持循环输入状态</span></div><div class="line">    entered = raw_input(<span class="string">"Please enter your input or leave a blank line to quit: \n"</span>)  <span class="comment">##拿到用户的输入，默认是string的类型</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> entered:</div><div class="line">        <span class="keyword">break</span>  <span class="comment">##直到空回车break出循环</span></div><div class="line">    url+=entered</div><div class="line">    req = urllib2.Request(url)</div><div class="line">    <span class="comment"># print req</span></div><div class="line">    res_data = urllib2.urlopen(req)</div><div class="line">    res = res_data.read()  <span class="comment">##拿到的响应也是string类型</span></div><div class="line">    <span class="comment"># print res</span></div><div class="line">    dic=eval(res)  <span class="comment">#转换为字典</span></div><div class="line">    myJson2=json.loads(res)  <span class="comment">#转换为json</span></div><div class="line">    print(res+<span class="string">"\n"</span>)</div></pre></td></tr></table></figure>

<p>最后，来看看效果如何，哈哈哈（我输了好多次才有这效果，看来机器人还是不够智能）<img src="http://ww1.sinaimg.cn/large/6788d2b1jw1elmpnt5rfqj20zk0dfad2.jpg" alt=""></p>
<p>附上常用的返回code 的说明，其他的详见：<a href="http://www.tuling123.com/openapi/cloud/api.jsp?section=8" target="_blank" rel="external">http://www.tuling123.com/openapi/cloud/api.jsp?section=8</a></p>
<table>
<thead>
<tr>
<th></th>
<th>code</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>100000</td>
<td>文本类数据</td>
<td></td>
</tr>
<tr>
<td></td>
<td>200000</td>
<td>网址类数据</td>
<td></td>
</tr>
<tr>
<td></td>
<td>40002</td>
<td>请求内容为空</td>
<td></td>
</tr>
<tr>
<td></td>
<td>40007</td>
<td>服务器数据格式异常</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="Todolist">Todolist</h2>
<p>貌似api接入的效果不太好，问了几个问题后开始有重复的回复出现，不知道是我发请求不对还是他们服务器返回就是这样子（不要找借口），有空再研究研究。</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="码这坨代码目的">码这坨代码目的</h2>
<p>在知乎上看到，<a href="http://www.zhihu.com/question/20492916" target="_blank" rel="external">微信公众平台的聊天机器人是怎么搭建？</]]>
    </summary>
    
      <category term="python" scheme="http://wfxiong1990.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[利用GitHub Pages 和 Hexo 搭建静态博客学习笔记]]></title>
    <link href="http://wfxiong1990.github.io/2014/10/12/how-to-build-a-blog-system-using-github-and-hexo/"/>
    <id>http://wfxiong1990.github.io/2014/10/12/how-to-build-a-blog-system-using-github-and-hexo/</id>
    <published>2014-10-11T16:51:20.000Z</published>
    <updated>2014-10-24T15:41:22.000Z</updated>
    <content type="html"><![CDATA[<p>无意中在知乎上看到了这样一个话题：<a href="http://www.zhihu.com/question/20962496" target="_blank" rel="external">如何在 GitHub 上写博客？</a> 于是开始自己捣腾，现在分享一下自己搭建博客的一点心得和笔记</p>
<hr>
<h2 id="GitHub_Pages">GitHub Pages</h2>
<p>给我的感觉就是，给我一个index.html，我能给你变出一个世界，其实不管什么语言什么架构搭建的项目，只要把index.html 放上去，并且本地能正常运行，这就是<strong>静态网页程序</strong>。那么github pages就能显示出你想要的网页来，一般github pages 的地址是<code>yourname.github.io</code>,<em>yourname</em>是你的github用户名，貌似一个github账号对应一个github pages，如果需要从自己的域名进入，那么只需要在项目的根目录下加一个CNAME文件即可，如果是Mac下面或者Linux的环境，一行命令搞定：</p>
<p><code>vim CNAME</code> 或者<code>touch CNAME</code></p>
<p>记得用vim的时候记得:wq 保存退出</p>
<blockquote>
<p>ps:由于缓存的原因，第一次上传github pages 项目的时候需要等待十分钟左右，才能在yourname.github.io上看到</p>
</blockquote>
<hr>
<h2 id="Git">Git</h2>
<p>说到GitHub，顾名思义，git是一个分布式的版本控制系统，这里不详细描述，hub在geek的心里就是集线器的意思吧，所以要在github上写博客，首先要学会用git，git不需要很深入的学习，但基本的命令还是要掌握的，这里推荐一下<a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013743858312764dca7ad6d0754f76aa562e3789478044000" target="_blank" rel="external">廖雪峰的Git教程</a></p>
<p>Git的基础操作很简单，无非是<code>git init</code> ,<code>git add</code>,<code>git commit</code>,<code>git status</code>,<code>git push</code>和<code>git pull</code>，对应的操作是当前文件夹初始化、把文件纳入版本管理，提交更改，检查状态，push status的变化到远程repository，把远程repository的更新拉下来，但是git 最牛的地方在对分支的管理，这方便我还掌握不够，大家可以参考上文中提到的廖雪峰的Git教程。</p>
<hr>
<h2 id="Hexo">Hexo</h2>
<p><a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>是一个基于Node.js的静态博客程序，可以方便的生成静态网页托管在github和Heroku上。顾名思义，它是基于Node.js的，所以先要有Node.js的环境，<a href="http://www.infoq.com/cn/articles/nodejs-npm-install-config" target="_blank" rel="external">安装教程在此</a>。由于本人的macbook上安装了<a href="http://brew.sh/index_zh-cn.html" target="_blank" rel="external">Homebrew</a>，所以安装node只需要以下命令：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>brew update</div><div class="line"><span class="variable">$ </span>brew install node</div></pre></td></tr></table></figure>

<p>不得不赞，macbook真的是开发者最好的玩具，比逼格更有生产力啊。</p>
<p>Hexo虽然基于Node.js但是我们不需要了解Node.js编程，需要的只是4条命令：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>hexo g  <span class="comment">##生成静态博客的public文件夹，也就是要上传到GitHub Pages的那部分文件</span></div><div class="line"><span class="variable">$ </span>hexo s  <span class="comment">##运行本地的博客程序，比如你设置的端口号是4000的话，浏览器打开localhost:4000 就可以看到你搭建的博客是什么样子的了</span></div><div class="line"><span class="variable">$ </span>hexo d  <span class="comment">##上传本地的修改到远程仓库 前提是你在_config.yml里面设置了git仓库的路径和分支</span></div><div class="line"><span class="variable">$ </span>hexo n  <span class="comment">##新建一篇博客，就是new一个*.md的markdown文件，如果是在Mac下面可以直接用Mou程序打开</span></div></pre></td></tr></table></figure>

<p>看上去简单吧～</p>
<p>推荐本地运行的时候把日志打开，这样哪里缺文件配置有问题一目了然。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span><span class="symbol">logger:</span> <span class="keyword">false</span></div><div class="line"><span class="variable">$ </span><span class="symbol">logger_format:</span> dev</div></pre></td></tr></table></figure>

<p>记住至少要在冒号后有一个空格，博客才能正确运行。</p>
<hr>
<h2 id="Hexo主题优化">Hexo主题优化</h2>
<p>本博客采用了<a href="https://github.com/A-limon/pacman" target="_blank" rel="external">Pacman的主题</a>。<a href="http://yangjian.me/pacman/hello/introducing-pacman-theme/" target="_blank" rel="external">介绍在此</a>，不得不说，这个主题很漂亮，给人眼前一亮的感觉。用这个主题只要把github上的资源通过<code>git clone</code>到<code>本地的hexo目录\themes</code>下面，改一下hexo的_config.yml：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">theme</span>: <span class="string">pacman</span></div></pre></td></tr></table></figure>

<p>就可以了</p>
<hr>
<h2 id="Markdown">Markdown</h2>
<p>Markdown简直是程序猿的word编辑器，wikipedia里面介绍如下：</p>
<blockquote>
<p>Markdown 是一种轻量级标记语言，创始人为約翰·格魯伯（John Gruber）。它允许人们“使用易读易写的纯文本格式编写文档，然后转换成有效的XHTML(或者HTML)文档”。</p>
</blockquote>
<p>Markdown的学习可以参考作业部落的<a href="https://www.zybuluo.com/mdeditor" target="_blank" rel="external">CMD Markdown</a>在线的Markdown编辑器，很快就能上手的。</p>
<hr>
<h2 id="域名申请和绑定">域名申请和绑定</h2>
<p>很幸运，我通过github的student package 拿到了namecheap的一年 顶级域名 <code>xwf.me</code>的使用权，<a href="http://www.yd631.com/namecheap-free-me/" target="_blank" rel="external">申请方法</a>。拿到后把该域名的URL Forwarding 改成如下即可：<br><img src="http://ww4.sinaimg.cn/mw690/6788d2b1gw1elm37g1b7gj20ju07zdgr.jpg" alt="image"></p>
<p>具体教程<a href="http://davidensinger.com/2013/03/setting-the-dns-for-github-pages-on-namecheap/" target="_blank" rel="external">戳这里</a>。</p>
<h2 id="小结">小结</h2>
<p>自己搭建博客还是很拼的，各种google，百度还是算了，推荐一个网站：<a href="http://tmd123.com" target="_blank" rel="external">通天塔</a>，把google镜像到AWS亚马逊云上面，速度上还是靠谱的，<del>隐私问题，反正应该比百度靠谱吧，我也不知道</del>。<br>能有独立域名，网站还很干净，没广告，markdown熟练后也很方便，写博客也能慢慢改进自己描述问题不清楚，无法正确表达观点的问题。理科生，怀才不遇的大都连自己会啥都说不清楚。</p>
<p>好了，本篇就到这里吧，谢谢观赏，我不是<a href="http://weibo.com/jiaoshoutv" target="_blank" rel="external">叫兽易小星</a>，我从不做广告～</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>无意中在知乎上看到了这样一个话题：<a href="http://www.zhihu.com/question/20962496" target="_blank" rel="external">如何在 GitHub 上写博客？</a> 于是开始自己捣腾，现在分享一下自己搭建]]>
    </summary>
    
      <category term="Hexo" scheme="http://wfxiong1990.github.io/tags/Hexo/"/>
    
      <category term="Git" scheme="http://wfxiong1990.github.io/tags/Git/"/>
    
  </entry>
  
</feed>
